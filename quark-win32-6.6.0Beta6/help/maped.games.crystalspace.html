<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
  <title>Crystal Space</title>
  <meta name="Description" content="QuArK Information Database - Page: 2.6.19.&nbsp;Crystal Space">
  <meta name="Keywords" content="QuArK InfoBase Quake Army Knife QRK QKM Python PY Map Editor Hexen Heretic Half-Life Sin Kingpin Soldier-of-Fortune Star-Trek-Voyager Elite-Force">
  <link rel=stylesheet href="standard.css" type="text/css">
</head>

<body>
<a name="__top__"></a>
<table width="100%" border=0 cellspacing=0>
  <tr>
    <td width=213>
      <a target="_blank" href="http://quark.sourceforge.net/"><img src="quarkicon.png" width=213 height=90 border=0 alt="Go to QuArK Web Site"></a>
    </td>
    <td width="70%" align=center>
      <div class="topheadline">Crystal Space</div>
      <div class="sm">Updated&nbsp;25 Jul 2009</div>
    </td>
    <td width="30%" valign=bottom nowrap>
      Upper&nbsp;levels:<br>-&nbsp;<a href="index.html">QuArK&nbsp;Information&nbsp;Base</a><br>-&nbsp;<a href="maped.html">2.&nbsp;Map&nbsp;editing</a><br>-&nbsp;<a href="maped.games.html">2.6.&nbsp;FAQs&nbsp;for&nbsp;each&nbsp;supported&nbsp;g...</a><br>
    </td>
  </tr>
</table>
<table width="100%" border=0 cellspacing=0>
  <tr class="headline">
    <td width="99%">
      <p class="headline">&nbsp;2.6.19.&nbsp;Crystal Space</p>
    </td>
    <td width="1%" align=right nowrap>
      &nbsp;[&nbsp;<span class="navenable"><a href="maped.games.fakk2.html">Prev</a></span>&nbsp;-&nbsp;<span class="navenable"><a href="maped.games.html">Up</a></span>&nbsp;-&nbsp;<span class="navenable"><a href="maped.builderrors.html">Next</a></span>&nbsp;]&nbsp;
    </td>
  </tr>
</table>
<table border=0 width="100%" cellspacing=10><tr><td><p>If you have any questions, problems or find solutions regarding this topic, please post them in the
<a href="http://quark.planetquake.gamespy.com/forums/">QuArK forum/mailing-list</a>.
</p>
</td></tr></table>
<br>

<table width="100%" border=0 cellspacing=0>
  <tr class="headline">
    <td width="100%">
      <p class="subheadline">&nbsp;Index</p>
    </td>
  </tr>
</table>
<ul class="index">
  <li>- <a href="#quark_setup">Basic Configuration with Crystal Space</a>&nbsp;<span class="added">(25 Jul 2009)</span>
  <li>- <a href="#walktest_setup">QuArK setup for Crystal Space Walktest</a>&nbsp;<span class="added">(25 Jul 2009)</span>
</ul>
<br>


<a name="quark_setup"></a>
  <table width="100%" border=0 cellspacing=0>
    <tr class="headline">
      <td>
        <p class="item">&nbsp;Basic Configuration with Crystal Space</p>
      </td>
      <td align=right>
        <font size=-2>Andrew/cdunde&nbsp;-&nbsp;25 Jul 2009</font>
      </td>
      <td width="1%" align=right nowrap>
        &nbsp;&nbsp;[&nbsp;<a href="#__top__">Top</a>&nbsp;]&nbsp;
      </td>
    </tr>
  </table>
  <table border=0 width="100%" cellspacing=10><tr><td>
<p><b>Question:</b><br>
How do I configure to use QuArK with Crystal Space.
</p><p><b>Answer:</b><br>
The documentation below comes from Andrew Watt on 2-Oct-2003.
</p><p><b><u>Python</u></b><br>
</p><p>Unless you are using the latest release of QuArK you are going to need to get Mini-Python
(<a href="http://www.python.org/">www.python.org</a>) to run it.
</p><p><b><u>Environmental Variables</u></b><br>
</p><p>The first part of the setup will be to add a variable to our system. The screen shot below shows the windows we'll use to do just that.<br>
</p><p><table border=0 cellspacing=0><tr><td>
<img width=664 heigth=412 src="maped.games.crystalspace.image001.png">
</td></tr></table>
</p><p>Open <b>Control Panel &gt;</b> then <b>System &gt;</b> select the <b>Advanced Tab &gt;</b> click on <b>Environmental Variables &gt;</b> in the upper <b>“User Variables for ...”</b> area click <b>NEW</b>. We're now looking at a <b>“New User Variable”</b> box. Under <b>“Variable name”</b> enter <b>“CRYSTAL”</b> and for <b>“Variable Value”</b> enter your <b>CS path</b>  e.g. C:\programs\CS (without any quotes for either box). Click <b>OK</b> in your windows until you're back down to the <b>Control Panel</b> and close it too.<br>
</p><p><b><u>Map2cs.cfg Configuration</u></b><br>
</p><p>There is a <b>“map2cs.cfg”</b> file that must now be changed slightly. Open up <b>Notepad</b> and open the .cfg file with it (it should be located in your CS folder\data\config\). It should similar to below (this is not the original):
</p><div class="doccode"><pre>
Map2CS.TextureSettings.DefaultTexture = liquids/bubbles
Map2CS.TextureSettings.zip1 = <FONT COLOR="red">X:\xxxxxxxxxxxxx\</FONT>CS\data\stdtex.zip 
Map2CS.TextureSettings.wad1 = <FONT COLOR="red">X:\xxxxxxxxxxxxx\</FONT>CS\data\cstex_1.wad
Map2CS.TextureSettings.wad2 = <FONT COLOR="red">X:\xxxxxxxxxxxxx\</FONT>CS\data\cstex_2.wad

Map2CS.General.Scaling = 0.025
Map2CS.General.UseBSP = 1
Map2CS.General.RemoveHidden = 0
Map2CS.General.LightScale=30

System.ApplicationID = Map2CS
</pre></div>

<p>Change whatever you have for <FONT COLOR="red">X:\xxxxxxxxxxxxx\</FONT> into the valid CS path followed by the specific data paths making it look something like “C:\programs\CS\data\cstex_1.wad” (without the quotes). Remember, if you add more texture packs later, they must be included here (another wad would be “.wad3 =”) Save the changes but keep <b>Notepad</b> open.
</p><p><b><u>Creating the Movefile.bat</u></b>
</p><p>In a blank <b>Notepad</b> enter the following line:
</p><div class="doccode"><pre>
move /Y %2\maps\%~n1.zip %2
</pre></div>

<p>Save this as <b>“movefile.bat”</b> (without the quotes) in your CS directory. This will move the file from 
./data/maps to ./data where it can be located by the program.
</p><p><b><u>Getting QuArK Ready</u></b><br>
</p><p><table border=0 cellspacing=0>
<tr><td width=300 valign=top>Start up <b>QuArK</b> and we'll get a screen very much like the one to the right.<br>
</p><p>If not, you've probably started the wrong program, try again! First we will make some configuration changes:<br>
</p><p>-Go <b>Games</b> &gt; select   <b>Crystal Space</b><br>
</p><p>-Go <b>Games</b> again &gt; select <b>Configuration</b>
</td>
</p>
<p><td align=right><img src="maped.games.crystalspace.image002.png"><br></td></tr></table><br>
</p><p>Next we'll pick <b>Crystal Space</b> from the configuration list and see a screen like the one below. The highlighted parts are what must be added, deleted or modified but all input is displayed beside the image for you. The red bars that end with \CS should be your Crystal Space directory; e.g. C:\programs\CS. Once that is done it's time to get some texture going.
</p><p><table border=0 cellspacing=0>
<tr><td width=300 valign=top>
<br>
</p><p><br>
WalkTest.exe -relight<br>
[your CS directory]<br>
<br>
</p><p>........................<br>
numgrid256<br>
512<br>........................
</p><p>[CHECKED]<br>
[your CS directory]<br>
Classic Quake<br>
</p><p>map2cs.exe<br>
%mapfile% %file%.zip<br>
</p><p>levtool.exe<br>
-list %file%.zip<br>
</p><p>movefile.bat<br>
%file% %basepath%\data
</td>
<td><img src="maped.games.crystalspace.image003.png"></td></tr></table><br>
</p><p><b><u>Texture Add-on</u></b><br>
</p><p><table border=0 cellspacing=0>
<tr><td width=300 valign=top>
Our next goal is to now make the textures available to <b>QuArK.</b> As displayed in this window, we go <b>Toolboxes</b> from the toolbar &gt; then select <b>Texture Browser...</b> This will open the <b>Texture Browser</b> window.
</td>
</p>
<p><td align=right><img src="maped.games.crystalspace.image004.png"><br></td></tr></table><br>
</p><p><table border=0 cellspacing=0>
<tr><td width=340 valign=top>
On the Texture Browser window we will now create an add-on. It's probably easier than you think. From the toolbar pick <b>Folders &gt; New Main Folder.</b>
</p><p>Another window will now open from which we want <b>“In a new Add-on”</b> so select it and click <b>OK.</b> We will be prompted to save it first (in the main <b>QuArK</b> folder, nowhere else is allowed and if you move it, it will no longer work).
</p><p>Now we're back at the <b>Texture Browser</b> window but with a slight change: there is a <b>“New Folder”</b> (where the red bar is shown) in the tree which we can rename (probably to whatever you saved it as).
</p><p>There's nothing in it yet, but we're about to fix that. Make sure the “New Folder” is selected and, from the toolbar again, go <b>Edit &gt; Import Files &gt; Import (copy) Files.</b> Goto wherever your texture file(s) are located and select it/them. If they are not visible and you are sure you are in the correct folder they may be in an unsupported format and you'll have to change them. We'll assume all is well and you've got your textures and clicked <b>OK.</b> They will now be available to use in <b>QuArK.</b>
</td>
<td align=right valign=top><img src="maped.games.crystalspace.image005.png"><br></td></tr></table><br>
</p>
<p>You might want to exit and restart <b>QuArK</b> now to get the Save dialog box.<br>
</p><p>A quick note on removing folders. If you decide that you've made a mistake or no longer want a certain add-on and want to remove it you must do the following: select the folder &gt; from toolbar's <b>Folders</b> &gt; click <b>Delete Folder</b> then <b>Folders</b> from the bar again &gt; click <b>Add-Ons...</b> &gt; select the appropriate add-on from the list and click <b>Remove</b> then <b>OK.</b> There will now be a message along the lines of “cs_texadd.qrk” has been modified save the changes?” click <b>Yes.</b> You can now go into your <b>QuArK</b> folder and delete the “cs_texadd.qrk” completely.
</p><p><b><u>Configuring the Crystal Space Menu</u></b><br>
</p><p><table border=0 cellspacing=0>
<tr><td width=300 valign=top>
Open a new CS map using the button circled in the window to the right and a new window (shown below) will open allowing map creation, editing, etc.
</td>
</p>
<p><td align=right><img src="maped.games.crystalspace.image006.png"><br></td></tr></table><br>
</p><p><table border=0 cellspacing=0>
<tr><td width=300 valign=top>
To get to the next part where we will change the menu; select <b>Crystal Space</b> from the tool bar and click <b>“Customize menu...”</b> as shown in the figure to the right here.
</td>
</p>
<p><td align=right><img src="maped.games.crystalspace.image007.png"><br></td></tr></table><br>
</p>
<p>The <b>“Customize Crystal Space menu”</b> window (similar to the one shown below but initially blank) will now be open. Select the first item in the tree, which should be <b>“&amp;GO ! (build+Walktest)”</b> and make the displayed changes.<br>
</p><p><table border=0 cellspacing=0>
<tr><td width=300 valign=top><br>
</p><p>.<br>
</p><p>Ctrl+R<br>
[CHECKED]<br>
...................<br>
</p><p>[CHECKED]<br>
[CHECKED]<br>
[CHECKED]<br>
...................<br>
</p><p>[CHECKED]<br>
</p><p>[CHECKED]<br>
</p><p>[CHECKED]
</p><p></td>
</p><p><td align=right><img src="maped.games.crystalspace.image008.png"><br></td></tr></table><br>
</p><p>Now do the same for the <b>“&amp;Complete rebuild”</b> and <b>“&amp;Run Walktest”</b> items as well.<br>The screens and inputs are below in Fig 9 and Fig 10.<br>
</p><p><table border=0 cellspacing=0>
<tr><td width=300 valign=top><br>
</p><p>.<br>
</p><p>.<br>
.
</p><p>[CHECKED]<br>
...................<br>
[CHECKED]<br>
[CHECKED]<br>
[NOT CHECKED]<br>
...................<br>
</p><p>[CHECKED]<br>
.<br>
</p><p>[CHECKED]<br>
.<br>
</p><p>[CHECKED]
</p><p></td>
</p><p><td align=center><b>Fig 9</b><br>
</p><p><img src="maped.games.crystalspace.image009.png"><br></td></tr></table><br>
</p><p><table border=0 cellspacing=0>
<tr><td width=300 valign=top><br>
</p><p>.<br>
</p><p>.<br>
.<br>
</p><p>[CHECKED]<br>
...................<br>
</p><p>[NOT CHECKED]<br>
[NOT CHECKED]<br>
[CHECKED]<br>
...................<br>
.
</p><p>[NOT CHECKED]<br>
.<br>
</p><p>[NOT CHECKED]<br>
.<br>
</p><p>[NOT CHECKED]
</p><p></td>
</p><p><td align=center><b>Fig 10</b><br>
</p><p><img src="maped.games.crystalspace.image010.png"><br></td></tr></table><br>
</p><p>Note that there is nothing highlighted in Fig 10, we shouldn't have to make any changes to it, but was included just-in-case.<br>
</p><p>Quake Army Knife should now be configured. Test it out; from the <b>QuArK Explorer</b> create a new map as before. From the map window you can either select <b>Crystal Space</b> from the toolbar &gt; then <b>GO!</b> Or just hit <b>CTRL + R .</b><br>
</p><p><table border=0 cellspacing=0>
<tr><td width=300><br>
</p><p>Have fun!<br>
-AW</td>
</p><p><td align=center>
<img src="maped.games.crystalspace.image011.png"><br></td></tr></table><br>
</p>
  </td></tr></table>
  <br>

<a name="walktest_setup"></a>
  <table width="100%" border=0 cellspacing=0>
    <tr class="headline">
      <td>
        <p class="item">&nbsp;QuArK setup for Crystal Space Walktest</p>
      </td>
      <td align=right>
        <font size=-2>cdunde/Rowdy&nbsp;-&nbsp;25 Jul 2009</font>
      </td>
      <td width="1%" align=right nowrap>
        &nbsp;&nbsp;[&nbsp;<a href="#__top__">Top</a>&nbsp;]&nbsp;
      </td>
    </tr>
  </table>
  <table border=0 width="100%" cellspacing=10><tr><td>
<p><b>Question:</b><br>
Hopefully this will be helpful to anyone wanting to use QuArK with
Crystal Space.
</p><p><b>Answer:</b><br>
The text below comes from a post by Greg Jones back on 20-Mar-2003.
</p><p>1. Create a batch file with the following commands (change the path
as necessary for your configuration).
</p><p>set CRYSTAL=C:\Crystal\CS
<div class="doccode"><pre>
c:\CRYSTAL\CS\map2cs.exe c:\CRYSTAL\CS\maps\%~n1.map
c:\CRYSTAL\CS\data\%~n1.zip
c:\CRYSTAL\CS\levtool.exe c:\CRYSTAL\CS\data\%~n1.zip
c:\CRYSTAL\CS\walktest.exe %~n1 -relight
</pre></div>
</p><p>2. In QuArK,
<div class="doccode"><pre>
a. under Menu Options, Select Configuration....
b. Select Games / Crystal Space
c. For the First Program enter the path of the batch file you just created
d. for the command-line argument place %mapfile%
</pre></div>
</p><p>3. Click Okay to Save
</p><p>4. Select Menu Item Crystal Space, Select Customize menu...
<div class="doccode"><pre>
a. for each of the options on the left hand, select them and
then make sure that the YES checkbox is checked so that the batch
file will be run.
</pre></div>
</p>
  </td></tr></table>
  <br>

<br>

<table width="100%" border=0 cellspacing=0>
  <tr class="headline">
    <td width="99%" align=center>
      <p class="sm">
        Copyright (c) 2009, GNU General Public License by The QuArK (Quake Army Knife) Community - <a target="_blank" href="http://quark.sourceforge.net/">http://quark.sourceforge.net/</a><br>
      </p>
    </td>
    <td width="1%" align=right nowrap>
      &nbsp;[&nbsp;<span class="navenable"><a href="maped.games.fakk2.html">Prev</a></span>&nbsp;-&nbsp;<a href="#__top__">Top</a>&nbsp;-&nbsp;<span class="navenable"><a href="maped.builderrors.html">Next</a></span>&nbsp;]&nbsp;
    </td>
  </tr>
</table>
</body>
</html>